# Default values for k8s-learn-app

namespace: learn

api:
  replicaCount: 2
  image:
    repository: ghcr.io/collinvandyck/k8s-learn-api  # Adjust for your registry
    tag: latest
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 80
    targetPort: 8080
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi
  env:
    PORT: "8080"
    VERSION: "1.0.0"

worker:
  replicaCount: 1
  image:
    repository: ghcr.io/collinvandyck/k8s-learn-worker  # Adjust for your registry
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi
  metricsPort: 9090
  env:
    REDIS_ADDR: "learn-app-redis:6379"
    QUEUE_NAME: "jobs"

redis:
  image:
    repository: redis
    tag: 7-alpine
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi
  persistence:
    enabled: true
    size: 1Gi
    storageClassName: local-path

postgres:
  image:
    repository: postgres
    tag: 16-alpine
    pullPolicy: IfNotPresent
  database: learndb  # moved from env
  username: learnuser  # moved from env
  password: changeme123  # needs to be defined
  storage: 5Gi  # moved from persistence
  storageClass: local-path  # moved from persistence
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

ingress:
  enabled: true
  className: traefik
  host: learn.local  # Change to your domain
  tls:
    enabled: false
